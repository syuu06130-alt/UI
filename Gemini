--[[
    SuperGodUI (All-In-One Integrated Version)
    å…¨ã¦ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’1ã¤ã®LocalScriptã«çµ±åˆã—ã¾ã—ãŸã€‚
]]

-- ============================================================================
-- ğŸ› ï¸ SERVICES & CONSTANTS (ã‚µãƒ¼ãƒ“ã‚¹ã¨å®šæ•°)
-- ============================================================================
local Players = game:GetService("Players")
local TweenService = game:GetService("TweenService")
local UserInputService = game:GetService("UserInputService")
local RunService = game:GetService("RunService")

local LocalPlayer = Players.LocalPlayer

-- ============================================================================
-- ğŸ¨ THEME MODULE (ãƒ†ãƒ¼ãƒç®¡ç†)
-- ============================================================================
local Theme = {}
Theme.Current = "Dark"
Theme.Presets = {
    Dark = {
        BG = Color3.fromRGB(25, 25, 30),
        BTN = Color3.fromRGB(45, 45, 60),
        TEXT = Color3.new(1, 1, 1),
    },
    Light = {
        BG = Color3.fromRGB(235, 235, 240),
        BTN = Color3.fromRGB(200, 200, 210),
        TEXT = Color3.new(0, 0, 0),
    }
}

function Theme:Get()
    return self.Presets[self.Current]
end

function Theme:Set(name)
    if self.Presets[name] then
        self.Current = name
        print("ğŸ¨ Theme changed to:", name)
    end
end

-- ============================================================================
-- ğŸï¸ ANIMATION MODULE (ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³)
-- ============================================================================
local Animation = {}

function Animation:Tween(obj, props, time, style, dir)
    local tween = TweenService:Create(
        obj,
        TweenInfo.new(time or 0.3, style or Enum.EasingStyle.Quad, dir or Enum.EasingDirection.Out),
        props
    )
    tween:Play()
    return tween
end

function Animation:Pulse(obj)
    self:Tween(obj, {Size = obj.Size * 1.05}, 0.15)
    task.delay(0.15, function()
        self:Tween(obj, {Size = obj.Size}, 0.15) -- å…ƒã®ã‚µã‚¤ã‚ºã«æˆ»ã™ï¼ˆå³å¯†ã«ã¯åˆæœŸå€¤ã‚’ä¿å­˜ã™ã¹ãã ãŒç°¡æ˜“å®Ÿè£…ï¼‰
    end)
end

-- ============================================================================
-- ğŸ¤– SMART UI MODULE (AIãƒ»ãƒ­ã‚¸ãƒƒã‚¯)
-- ============================================================================
local SmartUI = {}

function SmartUI:PredictAction(player)
    local ping = player:GetNetworkPing() -- æ³¨: æ­£ç¢ºãªPingå–å¾—ã«ã¯RemoteFunctionç­‰ãŒå¿…è¦ãªå ´åˆãŒã‚ã‚Šã¾ã™ãŒã€ã“ã“ã§ã¯APIé€šã‚Šã¨ä»®å®š
    -- ç°¡æ˜“çš„ã«Pingã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆå®Ÿç’°å¢ƒã§ã¯GetNetworkPingã®çµæœã‚’ä½¿ç”¨ï¼‰
    ping = ping or 0 
    
    if ping > 0.25 then
        return "é€šä¿¡æ³¨æ„UIã‚’å„ªå…ˆè¡¨ç¤º (Pingé«˜)"
    end
    return "ã‚¤ãƒ³ãƒ™ãƒ³ãƒˆãƒª or ã‚¹ã‚­ãƒ«UI (é€šå¸¸)"
end

function SmartUI:ShouldSimplify(level)
    return level < 5
end

function SmartUI:CooldownText(time)
    return "ä½¿ç”¨å¯èƒ½ã¾ã§ " .. time .. " ç§’"
end

-- ============================================================================
-- ğŸ§ PERSONALIZE MODULE (è¨­å®šä¿å­˜)
-- ============================================================================
local Personalize = {}
Personalize.Settings = {
    UIScale = 1,
    HUDVisible = true,
    Theme = "Dark"
}

function Personalize:Set(key, val)
    self.Settings[key] = val
end

function Personalize:Get(key)
    return self.Settings[key]
end

-- ============================================================================
-- ğŸ§© COMPONENTS MODULE (UIãƒ‘ãƒ¼ãƒ„ç”Ÿæˆ)
-- ============================================================================
local Components = {}

function Components:Frame(parent)
    local f = Instance.new("Frame")
    f.Name = "MainFrame"
    f.BackgroundColor3 = Theme:Get().BG
    f.Size = UDim2.fromScale(0.4, 0.5)
    f.Position = UDim2.fromScale(0.3, 0.25)
    f.Parent = parent

    local corner = Instance.new("UICorner", f)
    corner.CornerRadius = UDim.new(0, 16)

    local stroke = Instance.new("UIStroke", f)
    stroke.Transparency = 0.4
    stroke.Color = Color3.new(1, 1, 1)

    local padding = Instance.new("UIPadding", f)
    padding.PaddingTop = UDim.new(0, 10)
    padding.PaddingBottom = UDim.new(0, 10)
    padding.PaddingLeft = UDim.new(0, 10)
    padding.PaddingRight = UDim.new(0, 10)

    return f
end

function Components:Button(parent, text, callback)
    local b = Instance.new("TextButton")
    b.Name = "StyledButton"
    b.Text = text
    b.Size = UDim2.fromScale(1, 0.12)
    b.BackgroundColor3 = Theme:Get().BTN
    b.TextColor3 = Theme:Get().TEXT
    b.Font = Enum.Font.GothamBold
    b.TextSize = 18
    b.Parent = parent

    local corner = Instance.new("UICorner", b)
    corner.CornerRadius = UDim.new(0, 12)

    -- ãƒ›ãƒãƒ¼ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
    b.MouseEnter:Connect(function()
        Animation:Tween(b, {BackgroundColor3 = Theme:Get().BTN:Lerp(Color3.new(1,1,1), 0.15)})
    end)

    b.MouseLeave:Connect(function()
        Animation:Tween(b, {BackgroundColor3 = Theme:Get().BTN})
    end)

    -- ã‚¯ãƒªãƒƒã‚¯å‡¦ç†
    b.MouseButton1Click:Connect(function()
        Animation:Pulse(b)
        if callback then callback() end
    end)

    return b
end

function Components:Toggle(parent, name, default, changed)
    local state = default
    local btn -- å‰æ–¹å®£è¨€
    
    local function updateText()
        btn.Text = name .. ": " .. (state and "ON" or "OFF")
        -- çŠ¶æ…‹ã«å¿œã˜ãŸè‰²å¤‰ãˆãªã©ã®ãƒ­ã‚¸ãƒƒã‚¯ã‚‚ã“ã“ã«è¿½åŠ å¯èƒ½
    end

    btn = self:Button(parent, "", function()
        state = not state
        updateText()
        if changed then changed(state) end
    end)
    
    updateText() -- åˆæœŸãƒ†ã‚­ã‚¹ãƒˆè¨­å®š
    return btn
end

-- ============================================================================
-- ğŸ§  CORE MODULE (ä¸­æ¢ãƒ»ç®¡ç†)
-- ============================================================================
local Core = {}
Core.Player = LocalPlayer
Core.Gui = nil
-- å˜ä¸€ãƒ•ã‚¡ã‚¤ãƒ«ã®ãŸã‚Modulesãƒ†ãƒ¼ãƒ–ãƒ«ã¯ä¸è¦ã§ã™ãŒã€æ§‹é€ ç¶­æŒã®ãŸã‚æ®‹ã—ã¾ã™
Core.Modules = {
    Theme = Theme,
    Animation = Animation,
    Components = Components,
    SmartUI = SmartUI,
    Personalize = Personalize
}

function Core:CreateGui()
    -- æ—¢å­˜ã®åŒåGUIãŒã‚ã‚Œã°å‰Šé™¤ï¼ˆé‡è¤‡é˜²æ­¢ï¼‰
    local existing = self.Player:WaitForChild("PlayerGui"):FindFirstChild("SuperGodUI")
    if existing then existing:Destroy() end

    local gui = Instance.new("ScreenGui")
    gui.Name = "SuperGodUI"
    gui.IgnoreGuiInset = true
    gui.ResetOnSpawn = false
    gui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
    gui.Parent = self.Player:WaitForChild("PlayerGui")
    self.Gui = gui
    return gui
end

function Core:IsMobile()
    return UserInputService.TouchEnabled and not UserInputService.KeyboardEnabled
end

-- ============================================================================
-- ğŸš€ MAIN EXECUTION (èµ·å‹•ãƒ­ã‚¸ãƒƒã‚¯)
-- ============================================================================
task.wait(0.5) -- èª­ã¿è¾¼ã¿å¾…ã¡ï¼ˆå¿µã®ç‚ºï¼‰

print("ğŸš€ SuperGodUI Starting...")

-- 1. GUIã‚³ãƒ³ãƒ†ãƒŠä½œæˆ
local gui = Core:CreateGui()

-- 2. ãƒ¡ã‚¤ãƒ³ãƒ•ãƒ¬ãƒ¼ãƒ ä½œæˆ
local mainFrame = Components:Frame(gui)

-- 3. ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆè¨­å®š
local layout = Instance.new("UIListLayout", mainFrame)
layout.Padding = UDim.new(0, 10)
layout.HorizontalAlignment = Enum.HorizontalAlignment.Center
layout.SortOrder = Enum.SortOrder.LayoutOrder

-- 4. UIè¦ç´ ã®é…ç½®
-- ãƒœã‚¿ãƒ³: ã‚¤ãƒ³ãƒ™ãƒ³ãƒˆãƒª (SmartUIãƒ†ã‚¹ãƒˆ)
Components:Button(mainFrame, "ã‚¤ãƒ³ãƒ™ãƒ³ãƒˆãƒªè§£æ", function()
    local prediction = SmartUI:PredictAction(Core.Player)
    print("ğŸ§  AI Prediction:", prediction)
    
    -- UIä¸Šã«ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚’è¡¨ç¤ºã™ã‚‹ãªã©ã®æ‹¡å¼µãŒå¯èƒ½
end)

-- ãƒˆã‚°ãƒ«: ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰/ãƒ©ã‚¤ãƒˆãƒ¢ãƒ¼ãƒ‰
Components:Toggle(mainFrame, "ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰", (Theme.Current == "Dark"), function(isDark)
    Theme:Set(isDark and "Dark" or "Light")
    
    -- æ³¨æ„: æ—¢å­˜ã®UIã®è‰²ã‚’å³åº§ã«å¤‰ãˆã‚‹ã«ã¯ã€ã“ã“ã§UIå…¨ä½“ã‚’å†æç”»ã™ã‚‹ã‹ã€
    -- å„ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã«Signalã‚’æŒãŸã›ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚
    -- ç¾åœ¨ã®ç°¡æ˜“å®Ÿè£…ã§ã¯ã€æ¬¡å›ç”Ÿæˆã•ã‚Œã‚‹ãƒœã‚¿ãƒ³ã‚„ãƒ›ãƒãƒ¼æ™‚ã«è‰²ãŒé©ç”¨ã•ã‚Œã¾ã™ã€‚
    print("ğŸ¨ Mode switched. Hover over buttons to see changes.")
end)

-- ãƒœã‚¿ãƒ³: é–‰ã˜ã‚‹ï¼ˆã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ãƒ†ã‚¹ãƒˆç”¨ï¼‰
local closeBtn = Components:Button(mainFrame, "UIã‚’é–‰ã˜ã‚‹", function()
    Animation:Tween(mainFrame, {Size = UDim2.new(0,0,0,0), GroupTransparency = 1}, 0.5, Enum.EasingStyle.Back, Enum.EasingDirection.In)
    task.wait(0.5)
    gui:Destroy()
end)
closeBtn.BackgroundColor3 = Color3.fromRGB(200, 50, 50) -- è‰²ã‚’å€‹åˆ¥ã«ä¸Šæ›¸ã

print("âœ… SuperGodUI Loaded Successfully!")
